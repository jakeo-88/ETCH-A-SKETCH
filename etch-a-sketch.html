<!DOCTYPE html>
<html>
<head>
  <title>ETCH-A-SKETCH</title>
  <meta charset="UTF-8"/>
  <style>
    .container {
    font-size: 40px;
    width: 100%;
    display: grid;
    column-gap: 1px;
    row-gap: 1px;
    place-content: center;  
    }
  </style>
</head>
<body>
  <script>
    var body = document.getElementsByTagName('BODY')[0];
    var container = document.createElement('DIV');
    var button = document.createElement('BUTTON');
    container.classList.add('container');
    container.setAttribute('id', 'theGrid'); 
    button.textContent = 'Reset';
    body.appendChild(button);
    body.appendChild(container);

    var defaultSquares = 16;

    function sizeGrid() {
      
      newGridSize = parseInt(prompt('How many squares per side to make the new grid?'));
      gridSideLength = Math.ceil(Math.sqrt(newGridSize || defaultSquares));
      gridPixelSize = (20*15)/gridSideLength;

      container.style.gridTemplateColumns= 'repeat(' + gridSideLength + ', ' +gridPixelSize+ 'px)';
      container.style.gridTemplateRows= 'repeat(' + gridSideLength + ', ' +gridPixelSize+ 'px)';

      gridSquares = newGridSize;
      var grid = document.createDocumentFragment();
      for(var i = 0; i < gridSquares; i++) {
        var newDiv = document.createElement('div');
        newDiv.id = 'd' + i;
        newDiv.className = 'square';
        newDiv.style.backgroundColor = 'blue';
        grid.appendChild(newDiv);
      }
      container.appendChild(grid);
      
      var gridColor = document.querySelectorAll('div.square');
      gridColor.forEach((newDiv) => {
        newDiv.addEventListener('mouseover', (e) => {
          newDiv.style.backgroundColor = 'red';
        });
      });
      
      revertColor();
      
      function revertColor() {
        var j; 
        for(j = 0; j < gridColor.length; j++) {
          gridColor[j].style.backgroundColor = 'blue';
        }
      }console.log(gridSquares);
    }

    var newGridSize;
    var gridSquares = newGridSize || defaultSquares;
    if(Boolean(defaultSquares) == true) {
      
      var gridSideLength = Math.ceil(Math.sqrt(newGridSize || defaultSquares));
      var gridPixelSize = (20*15)/gridSideLength;

      container.style.gridTemplateColumns= 'repeat(' + gridSideLength + ', ' +gridPixelSize+ 'px)';
      container.style.gridTemplateRows= 'repeat(' + gridSideLength + ', ' +gridPixelSize+ 'px)';

      var grid = document.createDocumentFragment();
      for(var k = 0; k < gridSquares; k++) {
        var newDiv = document.createElement('div');
        newDiv.id = 'd' + k;
        newDiv.className = 'square';
        newDiv.style.backgroundColor = 'blue';
        grid.appendChild(newDiv);
      }
      container.appendChild(grid);
      var gridColor = document.querySelectorAll('div.square');
    gridColor.forEach((newDiv) => {
      newDiv.addEventListener('mouseover', (e) => {
        newDiv.style.backgroundColor = 'red';
      });
    });

    }else {

    }

    button.addEventListener('click', (e) => {
      sizeGrid(); 
    });
  </script>
</body>
</html>